(function(t){function e(e){for(var r,o,c=e[0],u=e[1],l=e[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);s&&s(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,c=1;c<n.length;c++){var u=n[c];0!==a[u]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={index:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/vue-waterfall-render/dist/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var s=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("c31f")},"4d1c":function(t,e,n){"use strict";n("accf")},8290:function(t,e,n){},accf:function(t,e,n){},c31f:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("vue-waterfall-render",{staticClass:"data-con",attrs:{dataList:t.dataList},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:"//imkch.com"}},[e.data.cover?n("img",{attrs:{src:e.data.cover,height:e.data.coverHeight}}):t._e(),n("div",{staticClass:"info"},[n("h3",[t._v(t._s(e.data.name))]),n("p",[t._v(t._s(e.data.describe))])])])]}}])})],1)},i=[],o=(n("96cf"),n("1da1")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"waterfall",staticClass:"waterfall",style:{height:t.containerHeight+"px"}},t._l(t.widgetList,(function(e,r){return n("div",{key:r,ref:"widgetRef",refInFor:!0,staticClass:"waterfall-item waterfall-fade",style:{width:t.columnWidth+"px"}},[t._t("default",null,{data:e})],2)})),0)},u=[],l=(n("4160"),n("c975"),n("a9e3"),n("d3b7"),n("07ac"),n("159b"),n("b85c")),s={name:"VueWaterfallRender",props:{dataList:{type:Array,default:function(){return[]}},minColumnWidth:{type:Number,default:260},gap:{type:Number,default:8}},data:function(){return{containerHeight:300,columnHeightMap:{},columnWidth:this.minColumnWidth,widgetList:[]}},mounted:function(){window.addEventListener("resize",this.resizeListener);var t=this.calcuCols(),e=t.columnCount,n=t.columnWidth;this.columnCount=e,this.columnWidth=n,this.preloadLoad()},watch:{dataList:function(){this.preloadLoad()}},methods:{calcuCols:function(){var t=this.$refs.waterfall.clientWidth,e=this.gap,n=this.minColumnWidth,r=Math.max(Math.floor(t/(n+e)),1),a=n;return a=1===r?t:(t+e)/r-e,{columnCount:r,columnWidth:a}},preloadLoad:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.dataList,r=[],a=Object(l["a"])(n),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=19;break}if(o=i.value,!o.cover){e.next=16;break}if(!o.coverWidth||!o.coverHeight){e.next=14;break}o.imgWidth=o.imgWidth||o.coverWidth,o.imgHeight=o.imgHeight||o.coverHeight,o.coverHeight=Math.round(t.columnWidth/(o.imgWidth/o.imgHeight)),e.next=16;break;case 14:return e.next=16,t.imgAsyncLoad(o.cover);case 16:r.push(o);case 17:e.next=5;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](3),a.e(e.t0);case 24:return e.prev=24,a.f(),e.finish(24);case 27:t.widgetList=r,t.$nextTick((function(){t.renderWidgets()}));case 29:case"end":return e.stop()}}),e,null,[[3,21,24,27]])})))()},renderWidgets:function(){var t=this,e=this.$refs.widgetRef;this.columnHeightMap={},e&&e.forEach((function(e){var n=t.columnHeightMap,r=t.gap,a=t.columnWidth,i=t.columnCount,o=Object.values(n),c=0,u=0,l=0;if(o.length<i)l=o.length;else{var s=Math.min.apply(null,o);l=o.indexOf(s),c=s+r}u=l*(a+r),e.style.top=c+"px",e.style.left=u+"px",n[l]=c+e.clientHeight,t.containerHeight=Math.max.apply(null,Object.values(n))+r}))},imgAsyncLoad:function(t){var e=this;return new Promise((function(n,r){var a=new Image;a.src=t,a.onload=a.onerror=function(t){var r="load"===t.type?Math.round(e.columnWidth/(a.width/a.height)):0;n(r)}}))},resizeListener:function(){var t=this.calcuCols(),e=t.columnCount,n=t.columnWidth;this.columnCount=e,this.columnWidth=n,this.preloadLoad()}}},d=s,f=(n("fb9a"),n("2877")),h=Object(f["a"])(d,c,u,!1,null,"07c49dee",null),p=h.exports,m=n("96eb"),g=n.n(m),v={name:"App",components:{VueWaterfallRender:p},data:function(){return{dataList:[],imgSizeMap:{"0.jpg":[500,333],"1.jpg":[500,333],"2.jpg":[500,313],"3.jpg":[391,220],"4.jpg":[500,358],"5.jpg":[500,300],"6.jpg":[526,300],"7.jpg":[500,313],"8.jpg":[500,334],"9.jpg":[533,300]}}},mounted:function(){this.getDataList()},methods:{getDataList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=g.a.Random,r=[],a=0;a<100;a++)i="".concat(Math.floor(10*Math.random()),".jpg"),r.push({name:a+1+"、"+n.ctitle(Math.ceil(10*Math.random())),describe:n.cword(Math.ceil(100*Math.random())),cover:Math.floor(5*Math.random())&&"./img/".concat(i),coverWidth:t.imgSizeMap[i][0],coverHeight:t.imgSizeMap[i][1]});t.dataList=r;case 4:case"end":return e.stop()}}),e)})))()}}},b=v,w=(n("4d1c"),Object(f["a"])(b,a,i,!1,null,null,null)),y=w.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(y)}}).$mount("#app")},fb9a:function(t,e,n){"use strict";n("8290")}});
//# sourceMappingURL=index.60ada710.js.map