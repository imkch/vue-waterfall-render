(function(t){function e(e){for(var r,o,c=e[0],u=e[1],s=e[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,c=1;c<n.length;c++){var u=n[c];0!==a[u]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={index:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/vue-waterfall-render/dist/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var l=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("c31f")},"244f":function(t,e,n){},"4d1c":function(t,e,n){"use strict";n("accf")},aad3:function(t,e,n){"use strict";n("244f")},accf:function(t,e,n){},c31f:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("vue-waterfall-render",{staticClass:"data-con",attrs:{dataList:t.dataList},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:"//imkch.com"}},[e.data.cover?n("img",{attrs:{src:e.data.cover}}):t._e(),n("div",{staticClass:"info"},[n("h3",[t._v(t._s(e.data.name))]),n("p",[t._v(t._s(e.data.describe))])])])]}}])})],1)},i=[],o=(n("96cf"),n("1da1")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"waterfall",staticClass:"waterfall",style:{height:t.containerHeight+"px"}},t._l(t.widgetList,(function(e,r){return n("div",{key:r,ref:"widgetRef",refInFor:!0,staticClass:"waterfall-item waterfall-fade",style:{width:t.columnWidth+"px"}},[t._t("default",null,{data:e})],2)})),0)},u=[],s=(n("4160"),n("c975"),n("a9e3"),n("d3b7"),n("07ac"),n("159b"),n("b85c")),l={name:"VueWaterfallRender",props:{dataList:{type:Array,default:function(){return[]}},minColumnWidth:{type:Number,default:260},gap:{type:Number,default:8}},data:function(){return{containerHeight:300,columnHeightMap:{},columnWidth:this.minColumnWidth,widgetList:[]}},mounted:function(){window.addEventListener("resize",this.resizeListener);var t=this.calcuCols(),e=t.columnCount,n=t.columnWidth;this.columnCount=e,this.columnWidth=n,this.preloadLoad()},watch:{dataList:function(){this.preloadLoad()}},methods:{calcuCols:function(){var t=this.$refs.waterfall.clientWidth,e=this.gap,n=this.minColumnWidth,r=Math.max(Math.floor(t/(n+e)),1),a=n;return a=1===r?t:(t+e)/r-e,{columnCount:r,columnWidth:a}},preloadLoad:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.dataList,r=[],a=Object(s["a"])(n),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=15;break}if(o=i.value,o.imgHeight=0,!o.cover){e.next=12;break}return e.next=11,t.imgAsyncLoad(o.cover);case 11:o.imgHeight=e.sent;case 12:r.push(o);case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](3),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:t.widgetList=r,t.$nextTick((function(){t.renderWidgets()}));case 25:case"end":return e.stop()}}),e,null,[[3,17,20,23]])})))()},renderWidgets:function(){var t=this,e=this.$refs.widgetRef;this.columnHeightMap={},e&&e.forEach((function(e){var n=t.columnHeightMap,r=t.gap,a=t.columnWidth,i=t.columnCount,o=Object.values(n),c=0,u=0,s=0;if(o.length<i)s=o.length;else{var l=Math.min.apply(null,o);s=o.indexOf(l),c=l+r}u=s*(a+r),e.style.top=c+"px",e.style.left=u+"px",n[s]=c+e.clientHeight,t.containerHeight=Math.max.apply(null,Object.values(n))+r}))},imgAsyncLoad:function(t){var e=this;return new Promise((function(n,r){var a=new Image;a.src=t,a.onload=a.onerror=function(t){var r="load"===t.type?Math.round(e.columnWidth/(a.width/a.height)):0;n(r)}}))},resizeListener:function(){var t=this.calcuCols(),e=t.columnCount,n=t.columnWidth;this.columnCount=e,this.columnWidth=n,this.renderWidgets()}}},d=l,f=(n("aad3"),n("2877")),h=Object(f["a"])(d,c,u,!1,null,"541d1df6",null),p=h.exports,m=n("96eb"),v=n.n(m),g={name:"App",components:{VueWaterfallRender:p},data:function(){return{dataList:[]}},mounted:function(){this.getDataList()},methods:{getDataList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=v.a.Random,r=[],a=0;a<100;a++)r.push({name:a+1+"ã€"+n.ctitle(Math.ceil(10*Math.random())),describe:n.cword(Math.ceil(100*Math.random())),cover:Math.floor(5*Math.random())&&"./static/images/".concat(Math.floor(10*Math.random()),".jpg")});t.dataList=r;case 4:case"end":return e.stop()}}),e)})))()}}},b=g,w=(n("4d1c"),Object(f["a"])(b,a,i,!1,null,null,null)),y=w.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(y)}}).$mount("#app")}});
//# sourceMappingURL=index.7889833f.js.map